<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>AI Learning Assistant</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>
</head>

<body class="bg-light">
    <nav class="navbar navbar-dark bg-dark px-3">
    <a class="navbar-brand" href="/">AI Tutor</a>

    <div class="d-flex">
        <a href="/dashboard/" class="btn btn-light me-2">Dashboard</a>
        <form action="{% url 'logout' %}" method="post" class="d-inline">
  {% csrf_token %}
  <button class="btn btn-outline-danger btn-sm">Logout</button>
</form>

    </div>
</nav>


<div class="container py-5" style="max-width: 900px;">

    <h2 class="text-center fw-bold mb-4">ðŸŽ“ AI Learning Assistant</h2>

    <!-- Topic Form -->
    <form method="POST" class="p-4 shadow bg-white rounded-4 mb-4">
        {% csrf_token %}
        <input type="hidden" name="action" value="explain">

        <label class="form-label fw-bold">Enter a topic:</label>
        <div class="input-group mb-3">
            <span class="input-group-text bg-primary text-white">ðŸ“˜</span>
            <input type="text" name="topic" class="form-control form-control-lg" required>
        </div>

        <button type="submit" class="btn btn-lg w-100 text-white fw-bold"
            style="background: linear-gradient(to right, #0066ff, #00c6ff); border-radius: 10px;">
            ðŸš€ Explain Topic
        </button>
    </form>

    <!-- Explanation -->
    {% if explanation %}
    <div class="card shadow-lg border-0 mb-4 animate__animated animate__fadeIn">
        <div class="card-body">
            <h4 class="text-primary fw-bold">ðŸ“š Explanation</h4>
            <hr>
            <div class="mt-3" style="font-size: 1.05rem;">
                {{ explanation|safe }}
            </div>
        </div>
    </div>
    {% endif %}

    <!-- Quiz Section: Multiple Questions -->
    {% if quiz %}
        <h3 class="fw-bold text-success mb-3">ðŸ§  Quick Quiz (3 Questions)</h3>

        {% for q in quiz %}
        <div class="card shadow-lg border-0 mb-4 animate__animated animate__zoomIn">
            <div class="card-body">

                <h4 class="fw-bold">Question {{ forloop.counter }}</h4>
                <hr>

                <p class="fw-bold fs-5">{{ q.question }}</p>

                <form method="POST">
                    {% csrf_token %}
                    <input type="hidden" name="action" value="submit_quiz">
                    <input type="hidden" name="question_index" value="{{ forloop.counter0 }}">

                    {% for option in q.options %}
                    <div class="form-check mb-2">
                        <input type="radio" class="form-check-input" name="user_answer" value="{{ option }}" required>
                        <label class="form-check-label">{{ option }}</label>
                    </div>
                    {% endfor %}

                    <button type="submit" class="btn btn-success w-100 fw-bold mt-3">
                        âœ… Submit Answer
                    </button>
                </form>

            </div>
        </div>
        {% endfor %}
    {% endif %}

    <!-- Result -->
    {% if result %}
    <div class="alert alert-info fw-bold animate__animated animate__fadeIn text-center">
        {{ result }}
    </div>
    {% endif %}

</div>
</body>
</html>
